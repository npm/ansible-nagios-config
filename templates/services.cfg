{% for host_group in nagios_host_groups %}
{% if 'checks' in host_group %}
{% for check in host_group.checks %}
define service {
  use  local-service;
  hostgroup_name  {{host_group.name}};
  service_description  {{check.description}};
  check_command  {{check.command}};
{% if check.max_check_attempts is defined %}
  max_check_attempts {{ check.max_check_attempts }}
{% endif %}
{% if check.check_interval is defined %}
  check_interval {{ check.check_interval }}
{% endif %}
{% if check.retry_interval is defined %}
  retry_interval {{ check.retry_interval }}
{% endif %}
{% if check.notification_options is defined %}
  notification_options {{ check.notification_options }} 
{% endif %}
}
{% endfor %}
{% endif %}
{% endfor %}
